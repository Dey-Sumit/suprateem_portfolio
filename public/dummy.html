<html>

<head>
  <title>Your Imaginary Friends</title>
</head>

<body>
  <form action="#">
    <label for="imgwidth">Width</label>
    <input type="text" id="imgwidth" /> <br /><br />

    <label for="imgheight">Height</label>

    <input type="text" id="imgheight" /> <br /><br />

    <input type="checkbox" id="myCheck">Gray Scale<br /><br />
  </form>
  <button id="btnSubmit" onclick="getImg(imgwidth.value,imgheight.value)">Click Me</button>
  <br /><br />
  <div id="img-holder"></div>
  <!-- <script src="dummy.js" charset="utf-8"></script> -->
  <script>
    function getImg(imgwidth, imgheight) {

      //for gray scale image
      var gray = false;
      var checkBox = document.getElementById("myCheck");
      if (checkBox.checked == true) {
        gray = true
      }

      //modify the fetch API url
      var fetch_url = ''
      if (gray)
        fetch_url = `https://picsum.photos/${imgwidth}/${imgheight}/?grayscale`
      else
        fetch_url = `https://picsum.photos/${imgwidth}/${imgheight}/?random`

      var img = null;
      fetch(fetch_url)
        .then(response => {
          //create a new image and set the src
          img = new Image();
          img.src = response.url;
          console.log("image loaded");

          let node = document.getElementById("img-holder");
          node.appendChild(img);

        })
        .catch(err => console.log(err))
    }
  </script>
</body>

</html>